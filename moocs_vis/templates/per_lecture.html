{% extends "base.html" %}

{% block title %}Visualization per lecture video{% endblock %}

{% block content %}
<div class="page-title">
	<h2>Visualization of seek events in a lecture video</h2>
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://d3js.org/d3.v3.js"></script>
<script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
<script src="{{ STATIC_URL }}js/jquery.ui.labeledslider.js"></script>
<div class='container'>
	<p class="page-description">
		The concept of this visualization is state transition diagram, which is typically visualized as a graph where nodes represent the states and the lines connecting nodes reflect probabilistic or weighted transitions between states.<br>
		There are several filters that allow refining the visualized results based on different categories. For example we can choose active from userclasses and normal from achievements to select the average seeks of users who fall into those criteria. Furthermore, the slider allows us to adjust the granularity of data we want to see. The higher threshold set in the slider, the more insignificant links are removed and only links with larger strength than the threshold are taken into account.
	</p>
	<div class="dashboard-container">
		<div class="search_form">
			<form id='#search_form' method='get'>
				<select id='lecture_q' name='lecture_q' class="form-control inline-select">
					<option value="">Please choose a lecture</option>
					{% for l in lecture_list %}
						<option value="{{ l }}" {% if l == lecture_q %}selected{% endif %}>Lecture {{ l }}</option>
					{% endfor %}
				</select>
				<input id='nonclick_rate' name='nonclick_rate' type='hidden' value="{{ nonclick_rate }}" />
				<input id='search' value='Search' type='submit' class='btn btn-primary hidden' />
			</form>
		</div>
		<div class="clear_both"></div>
		<div class="userclass_options left">
			Choose user class:
			<div class="toggle-btn-grp joint-toggle">
				<label onclick="" class="toggle-btn {% if not userclass %}success{% endif %}"><input type="radio" class="visuallyhidden" name="userclass_q" value="all" checked>all</label>
				{% for c in userclass_list %}
					<label onclick="" class="toggle-btn {% if c == userclass %}success{% endif %}"><input type="radio" class="visuallyhidden" name="userclass_q" value="{{ c }}" {% if c == userclass %}checked{% endif %}>{{ c }}</label>
				{% endfor %}
			</div>
		</div>
		<div class="achievement_options left">
			Choose achievement:
			<div class="toggle-btn-grp joint-toggle">
				<label onclick="" class="toggle-btn {% if not achievement %}success{% endif %} achievement"><input type="radio" class="visuallyhidden" name="achievement_q" value="all" checked>all</label>
				{% for a in achievement_list %}
					<label onclick="" class="toggle-btn {% if a == achievement %}success{% endif %} achievement"><input type="radio" class="visuallyhidden" name="achievement_q" value="{{ a }}" {% if a == achievement %}checked{% endif %}>{{ a }}</label>
				{% endfor %}
			</div>
		</div>
		<div class="clear_both"></div>
		<div class="slider left">
			Connection strength threshold:
			<div id="level_slider" class="myslider"></div>
		</div>
		<div class="show_option left">
			<label for="show_self">Show internal seeks</label> <input type="checkbox" id="show_self" checked />
		</div>
		<div style="right:0;position:absolute;">
			<button id="toggle_legend" class="btn btn-info">Toggle legend</button>
			<img id="legend_img" src="{{ STATIC_URL }}img/explanation1.png" style="display:none;position:absolute;right:0;z-index:1;" width="500">
		</div>
		<div class="clear_both"></div>
	</div>
	<div class="visualization left">
		<div id="vis">Please choose a lecture to show</div>
		<div id="arrowpath"></div>
		<div class='legend'></div>
		<div id="slide" class="slide"></div>
		<div id="slide_name" class="slide_name"></div>
		<div class="bars">
			<div class="throughput">Throughput</div>
			<div id="graph_in" class="barchart"></div>
			<div id="graph_out" class="barchart"></div>
		</div>
	</div>
	<script src="{{ STATIC_URL }}js/data_per_lecture.js"></script>
	<script src="{{ STATIC_URL }}js/per_lecture.js"></script>
</div>
{% endblock %}
